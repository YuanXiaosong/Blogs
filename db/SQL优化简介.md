# SQL优化简介

## 基础概念
### 基础概念-SQL分类
#### SQL语句可以分成4类
##### - 数据查询语句
```
select
```

##### - DML数据操作语句
```
insert
update
delete
```

##### - DDL数据定义语句
```
create
drop
alter
modify
```

##### - 事务控制语句
```
select
```


### 基础概念-名词解释
##### - cardinality基数
可理解为结果集的记录数（rows）。

##### - Selectivity可选择性
满足筛选条件的记录数/筛选前的总行数，越小越好。

##### - 直方图
统计列数据的分布情况，适用于分布不均匀的数据。

##### - 回表
通过index的rowid返回结果集，逐条查询；
如果结果集较大，数据分布又比较分散，会造成严重IO问题。

##### - clustering factor集群因子
数据在数据块里是否根据索引键值集中分布；
大小在数据行数和所占有数据块数量之间。

##### - 统计信息
可通过dbms_stats包和analyze来收集；
包括表的信息，索引的信息，列的信息等。


### 基础概念-索引分类
##### - B树索引
- 索引键值和rowid数据存在叶子节点，所有叶子节点都在同一层，有序排列，并且是左右互联的；
- 根节点下有分支块，分支块也可以分层，最终指向叶子节点；
- 索引扫描从根节点到分支节点到叶子节点只需要几次就可找到具体数据的rowid，查询数据的时间基本稳定和可控。

##### - 位图索引
- 叶子节点包含被索引键值，对应rowid下限、上限、位图段；
- 不适合OLTP系统，索引维护修改成本高；
- 节约空间，能快速处理and或者or条件。


### 基础概念-数据访问路径
- 全表扫描（按数据块读取，多块读，数据来增加和高水位线会造成性能问题）
- Rowid（dbms_rowid包，能找到数据所在的数据文件、数据块所在数据块行数信息）
- 索引唯一扫描（扫描索引一次，返回一条数据，一次数据块读取）
- 索引范围扫描（比相应的唯一扫描多一次逻辑读，从叶子节点从左到右一直读取到相邻的终点）
- 索引全扫描（通过根节点找到最左边的叶子节点，然后用叶子节点相互连接的指针，扫描其他叶子节点，可以达到排序效果）
- 索引快速全扫描（类似于索引全扫描，区别在：只适用于CBO，可使用多块读，可并行，结果不一定有序，根据数据物理存储顺序扫描）
- 索引跳跃式扫描（skip，对于复合索引的非前导列使用索引查询）


### 基础概念-表连接方式和连接类型


## 优化器
### 优化器-RBO基于规则（rule）

### 优化器-CBO

### 优化器-模式


## 执行计划
### 执行计划-获取方式

### 执行计划解读

## 常用hint
### 常用hint

## SQL开发规范和优化建议
### SQL开发规范

### 常用优化建议